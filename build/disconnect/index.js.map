{"version":3,"sources":["../../src/disconnect/index.js"],"names":["app","plugin","settings","Promise","resolve","reject","client","closing","quit","log","info","id","emit"],"mappings":";;;;;;;;AAAA;;kBAEe,CAACA,GAAD,EAAMC,MAAN,EAAcC,QAAd,KAA2B,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACzE,QAAMC,SAASL,OAAOK,MAAtB;;AAEA,MAAI,CAACA,MAAD,IAAWA,OAAOC,OAAtB,EAA+B;AAC7B,WAAOH,SAAP;AACD;;AAEDE,SAAOE,IAAP,CAAY,MAAM;AAChBR,QAAIS,GAAJ,CAAQC,IAAR,CAAc,+BAAd,EAA8C;AAC5CT,yBAAUU,IAAIV,OAAOU,EAArB,IAA4BT,QAA5B;AAD4C,KAA9C;;AAIAF,QAAIY,IAAJ,+BAA4B,IAA5B;AACAR,YAAQ,IAAR;AACD,GAPD;AAQD,CAfyC,C","file":"index.js","sourcesContent":["import { EVENTS_DISCONNECT } from './../constants';\n\nexport default (app, plugin, settings) => new Promise((resolve, reject) => {\n  const client = plugin.client;\n  \n  if (!client || client.closing) {\n    return resolve();\n  }\n  \n  client.quit(() => {\n    app.log.info(`Подключение к Redis разорвано`, {\n      plugin: { id: plugin.id, ...settings }\n    });\n\n    app.emit(EVENTS_DISCONNECT, null);\n    resolve(null);\n  });\n});"]}