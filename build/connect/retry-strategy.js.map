{"version":3,"sources":["../../src/connect/retry-strategy.js"],"names":["retryStrategy","options","error","code","Error","total_retry_time","times_connected","undefined","Math","max","attempt"],"mappings":";;;;;kBACwBA,a;AAAT,SAASA,aAAT,CAAuBC,OAAvB,EAAgC;AAC7C,MAAIA,QAAQC,KAAR,CAAcC,IAAd,KAAuB,cAA3B,EAA2C;AACzC;AACA,WAAO,IAAIC,KAAJ,CAAU,mCAAV,CAAP;AACD;AACD,MAAIH,QAAQI,gBAAR,GAA2B,OAAO,EAAP,GAAY,EAA3C,EAA+C;AAC7C;AACA,WAAO,IAAID,KAAJ,CAAU,sBAAV,CAAP;AACD;AACD,MAAIH,QAAQK,eAAR,GAA0B,EAA9B,EAAkC;AAChC;AACA,WAAOC,SAAP;AACD;AACD;AACA,SAAOC,KAAKC,GAAL,CAASR,QAAQS,OAAR,GAAkB,GAA3B,EAAgC,IAAhC,CAAP;AACD","file":"retry-strategy.js","sourcesContent":["\nexport default function retryStrategy(options) {\n  if (options.error.code === 'ECONNREFUSED') {\n    // End reconnecting on a specific error and flush all commands with a individual error\n    return new Error('The server refused the connection');\n  }\n  if (options.total_retry_time > 1000 * 60 * 60) {\n    // End reconnecting after a specific timeout and flush all commands with a individual error\n    return new Error('Retry time exhausted');\n  }\n  if (options.times_connected > 10) {\n    // End reconnecting with built in error\n    return undefined;\n  }\n  // reconnect after\n  return Math.max(options.attempt * 100, 3000);\n}"]}