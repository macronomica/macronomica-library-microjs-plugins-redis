{"version":3,"sources":["../../../../src/modules/cache/methods/has.js"],"names":["ERROR_INFO","module","action","app","plugin","key","Promise","reject","property","client","hexists","then","exists","catch","err"],"mappings":";;;;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;;;;;AAEA,MAAMA,aAAa,EAAEC,8BAAF,EAAuBC,kCAAvB,EAAnB;;AAEA;;;;;;;;kBAOe,CAACC,GAAD,EAAMC,MAAN,KAAiB;AAC9B;;;;;AAKE,SAAO,UAAa;AAAA,QAAVC,GAAU,QAAVA,GAAU;;AAClB,QAAI,CAAC,sBAASA,GAAT,CAAD,IAAkBA,QAAQ,EAA1B,IAA+BA,QAAQ,GAA3C,EAAgD;AAC9C,aAAOC,QAAQC,MAAR,CAAe,oDAA6BP,UAA7B,IAAyCQ,UAAU,KAAnD,IAAf,CAAP;AACD;;AAED,WAAOJ,OAAOK,MAAP,CAAcC,OAAd,CAAsBL,GAAtB,EACJM,IADI,CACCC,UAAUA,WAAW,CADtB,EAEJC,KAFI,CAEEC,OAAOR,QAAQC,MAAR,CAAe,6BAAcJ,GAAd,EAAmBW,GAAnB,EAAwBd,UAAxB,CAAf,CAFT,CAAP;AAGD,GARD;AASH,C","file":"has.js","sourcesContent":["import isString from 'lodash.isstring';\nimport { MODULE_NAME, ACTION_NAME_HAS } from '../constants';\nimport internalError from '../../../errors/internal-error';\nimport propertyIsRequiredError from '../../../errors/property-is-required-error';\n\nconst ERROR_INFO = { module: MODULE_NAME, action: ACTION_NAME_HAS };\n\n/**\n * Устанавливает значения ключа в кеш\n *\n * @param {app} app               Экземпляр библиотеки MicroJS\n * @param {object} plugin         Экземпляр плагина\n * @returns {function({key?: *, setCb?: *, tags?: *}): Promise}\n */\nexport default (app, plugin) => {\n  /**\n   * @param {string} key            Ключ кеша\n   *\n   * @returns {Promise<null|*|error>}\n   */\n    return ({ key }) => {\n      if (!isString(key) || key === ''|| key === '*') {\n        return Promise.reject(propertyIsRequiredError({ ...ERROR_INFO, property: 'key' }));\n      }\n      \n      return plugin.client.hexists(key)\n        .then(exists => exists === 1)\n        .catch(err => Promise.reject(internalError(app, err, ERROR_INFO)));\n    };\n};"]}