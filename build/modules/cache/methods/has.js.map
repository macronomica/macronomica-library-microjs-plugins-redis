{"version":3,"sources":["../../../../src/modules/cache/methods/has.js"],"names":["ERROR_INFO","module","action","plugin","request","key","Promise","reject","property","client","hexists","then","exists","catch","err","log","error"],"mappings":";;;;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;;;;;AAEA,MAAMA,aAAa,EAAEC,8BAAF,EAAuBC,kCAAvB,EAAnB;;AAEA;;;;;;;kBAMgBC,MAAD,IAAaC,OAAD,IAAa;AAAA,QAC9BC,GAD8B,GACtBD,OADsB,CAC9BC,GAD8B;;AAEtC,MAAI,CAAC,sBAASA,GAAT,CAAD,IAAkBA,QAAQ,EAA1B,IAA+BA,QAAQ,GAA3C,EAAgD;AAC9C,WAAOC,QAAQC,MAAR,CAAe,oDAA6BP,UAA7B,IAAyCQ,UAAU,KAAnD,IAAf,CAAP;AACD;;AAED,SAAOL,OAAOM,MAAP,CAAcC,OAAd,CAAsBL,GAAtB,EACJM,IADI,CACCC,UAAUA,WAAW,CADtB,EAEJC,KAFI,CAEEC,OAAO;AACZV,YAAQW,GAAR,CAAYC,KAAZ,CAAkBF,GAAlB;AACA,WAAOR,QAAQC,MAAR,CAAe,6BAAcH,OAAd,EAAuBU,GAAvB,EAA4Bd,UAA5B,CAAf,CAAP;AACD,GALI,CAAP;AAMD,C","file":"has.js","sourcesContent":["import isString from 'lodash.isstring';\nimport { MODULE_NAME, ACTION_NAME_HAS } from '../constants';\nimport internalError from '../../../errors/internal-error';\nimport propertyIsRequiredError from '../../../errors/property-is-required-error';\n\nconst ERROR_INFO = { module: MODULE_NAME, action: ACTION_NAME_HAS };\n\n/**\n * Устанавливает значения ключа в кеш\n *\n * @param {object} plugin         Экземпляр плагина\n * @returns {function({key?: *, setCb?: *, tags?: *}): Promise}\n */\nexport default (plugin) => (request) => {\n  const { key } = request;\n  if (!isString(key) || key === ''|| key === '*') {\n    return Promise.reject(propertyIsRequiredError({ ...ERROR_INFO, property: 'key' }));\n  }\n  \n  return plugin.client.hexists(key)\n    .then(exists => exists === 1)\n    .catch(err => {\n      request.log.error(err);\n      return Promise.reject(internalError(request, err, ERROR_INFO));\n    });\n};"]}